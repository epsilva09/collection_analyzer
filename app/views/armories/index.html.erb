<% content_for :title, t('armories.index.page_title') %>

<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <main class="text-center">
            <%= render 'locale_switcher' %>
            <h1 class="my-4">
              <i class="fas fa-shield-alt text-white me-3"></i>
              <%= t('armories.index.heading') %>
            </h1>

            <%= render 'menu',
                       current_page: :index,
                       name: (@character_idx.present? ? @name : nil),
                       name_a: nil,
                       name_b: nil %>

            <%= render 'character_search_form',
                       url: armory_path,
                       value: @name,
                       label: t('armories.index.form.character_name'),
                       placeholder: t('armories.index.form.placeholder'),
                       submit_text: t('armories.index.form.search'),
                       loading_text: t('armories.shared.loading_search'),
                       turbo_disabled: false %>

            <!-- Error Alert -->
            <% if @error.present? %>
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i>
                <strong><%= t('armories.index.alerts.error') %>:</strong> <%= @error %>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
            <% end %>

            <!-- Collection Values -->
            <% if @values.present? %>
              <div class="row">
                <div class="col-12">
                  <div class="card shadow">
                    <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                      <h2 class="h5 mb-0">
                        <i class="fas fa-list-ul me-2"></i>
                        <%= t('armories.index.collection_attributes') %>
                      </h2>
                      <span class="badge bg-light text-dark fs-6">
                        <i class="fas fa-hashtag me-1"></i><%= @values.size %>
                      </span>
                    </div>
                    <div class="card-body">
                      <% if @values.any? %>
                        <%= render 'index_special_attributes', values: (@special_values || []) %>
                        <%= render 'index_regular_attributes', values: (@regular_values.presence || @values || []) %>
                      <% else %>
                        <div class="text-center py-5">
                          <i class="fas fa-inbox fa-3x text-white mb-3"></i>
                          <h5 class="text-white"><%= t('armories.index.no_items_found') %></h5>
                          <p class="text-white"><%= t('armories.index.no_items_found_description') %></p>
                        </div>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>

            <!-- Empty State -->
            <% if @name.present? && !@error.present? && !@values.present? && !@character_idx.present? %>
              <div class="row">
                <div class="col-12">
                  <div class="card border-warning">
                    <div class="card-body text-center py-5">
                      <i class="fas fa-search fa-4x text-warning mb-3"></i>
                      <h4 class="text-warning"><%= t('armories.index.character_not_found') %></h4>
                      <p class="text-white mb-0"><%= t('armories.index.no_data_available', name: @name) %></p>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
      </main>
    </div>
  </div>
</div>
