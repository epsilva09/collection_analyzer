<% content_for :title, t('armories.index.page_title') %>

<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <main class="text-center armory-page">
            <%= render 'locale_switcher' %>
            <%= render 'page_header', heading: t('armories.index.heading'), icon_class: 'fas fa-shield-alt' %>

            <%= render 'menu',
                       current_page: :index,
                       name: (@character_idx.present? ? @name : nil),
                       name_a: nil,
                       name_b: nil %>

            <%= render 'character_search_form',
                       url: armory_path,
                       value: @name,
                       label: t('armories.index.form.character_name'),
                       placeholder: t('armories.index.form.placeholder'),
                       submit_text: t('armories.index.form.search'),
                       loading_text: t('armories.shared.loading_search'),
                       turbo_disabled: false %>

            <!-- Error Alert -->
            <% if @error.present? %>
              <%= render 'error_alert',
                         label: t('armories.index.alerts.error'),
                         message: @error,
                         icon_class: 'fas fa-exclamation-triangle',
                         dismissible: true %>
            <% end %>

            <!-- Collection Values -->
            <% if @values.present? %>
              <div class="row">
                <div class="col-12">
                  <%= render 'section_card',
                             title: t('armories.index.collection_attributes'),
                             icon_class: 'fas fa-list-ul',
                             count: @values.size,
                             count_icon_class: 'fas fa-hashtag',
                             count_badge_classes: 'bg-light text-dark fs-6',
                             card_classes: '',
                             body_classes: '' do %>
                    <% if @values.any? %>
                      <%= render 'index_special_attributes', values: (@special_values || []) %>
                      <%= render 'index_regular_attributes', values: (@regular_values.presence || @values || []) %>
                    <% else %>
                      <div class="text-center py-5 armory-empty-state">
                        <i class="fas fa-inbox fa-3x text-white mb-3"></i>
                        <h5 class="text-white"><%= t('armories.index.no_items_found') %></h5>
                        <p class="text-white"><%= t('armories.index.no_items_found_description') %></p>
                      </div>
                    <% end %>
                  <% end %>
                </div>
              </div>
            <% end %>

            <!-- Empty State -->
            <% if @name.present? && !@error.present? && !@values.present? && !@character_idx.present? %>
              <div class="row">
                <div class="col-12">
                  <div class="card border-warning armory-section-card">
                    <div class="card-body text-center py-5 armory-empty-state">
                      <i class="fas fa-search fa-4x text-warning mb-3"></i>
                      <h4 class="text-warning"><%= t('armories.index.character_not_found') %></h4>
                      <p class="text-white mb-0"><%= t('armories.index.no_data_available', name: @name) %></p>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
      </main>
    </div>
  </div>
</div>
