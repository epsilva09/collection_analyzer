<% content_for :title, t('armories.material_collections.page_title', material: @material_name.presence || '-') %>

<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <main class="text-center armory-page">
            <%= render 'locale_switcher' %>

            <h1 class="my-4 armory-page-header">
              <i class="fas fa-box-open armory-page-icon"></i>
              <%= t('armories.material_collections.heading', material: @material_name) %>
            </h1>

            <div class="row justify-content-center mb-3">
              <div class="col-12 text-center">
                <%= link_to t('armories.materials.heading'), materials_armory_path(name: @name), class: 'btn btn-outline-secondary btn-sm me-2' %>
                <%= link_to t('armories.progress.heading'), progress_armory_path(name: @name), class: 'btn btn-outline-secondary btn-sm me-2' %>
                <%= link_to t('armories.compare.actions.back_to_index'), armory_path, class: 'btn btn-outline-secondary btn-sm' %>
              </div>
            </div>

            <% if @error.present? %>
              <div class="alert alert-danger" role="alert">
                <strong><%= t('armories.progress.alerts.error') %>:</strong> <%= @error %>
              </div>
            <% end %>

            <% if @collections_for_material.present? %>
              <div class="card shadow-sm mt-3 armory-section-card">
                <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                  <h2 class="h5 mb-0">
                    <i class="fas fa-list-ul me-2"></i>
                    <%= t('armories.material_collections.list_heading') %>
                  </h2>
                  <span class="badge bg-light text-dark"><%= @collections_for_material.size %></span>
                </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-dark table-hover mb-0 align-middle armory-data-table">
                      <thead>
                        <tr>
                          <th class="border-0"><%= t('armories.material_collections.table.collection') %></th>
                          <th class="border-0 text-center"><%= t('armories.material_collections.table.bucket') %></th>
                          <th class="border-0 text-center"><%= t('armories.progress.badges.progress') %></th>
                          <th class="border-0 text-center"><%= t('armories.progress.badges.missing') %></th>
                          <th class="border-0 text-center"><%= t('armories.material_collections.table.needed') %></th>
                        </tr>
                      </thead>
                      <tbody>
                        <% @collections_for_material.each do |col| %>
                          <%= render 'material_collections_row', collection: col %>
                        <% end %>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            <% else %>
              <div class="alert alert-info mt-4" role="alert">
                <i class="fas fa-info-circle me-2"></i>
                <%= t('armories.material_collections.empty', material: @material_name) %>
              </div>
            <% end %>
      </main>
    </div>
  </div>
</div>
